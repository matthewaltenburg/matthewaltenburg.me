{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/Virtual Makeup Python/",
    "result": {"data":{"site":{"siteMetadata":{"title":"Matthew Altenburg Portfolio","author":"Matthew Altenburg"}},"markdownRemark":{"id":"ecf743ae-a3bb-501c-9f9c-3b01c3652d2f","excerpt":"As part of my course from OpenCV, this project is a simple application where a person's picture is modified to appear as if they are wearing makeup. I have madeâ€¦","html":"<p>As part of my course from OpenCV, this project is a simple application where a person's picture is modified to appear as if they are wearing makeup. I have made a video that goes into more detail and included the code and overview diagram below. Or you can download it from my Github repository. Please feel free to contact me if you have any questions.</p>\n<h2><a href=\"https://github.com/matthewaltenburg/virtual_makeup_opencv.git\" target=\"_blank\">Github code repository</a></h2>\n<p align=\"center\">\n<iframe\n    style=\"align:center\"\n    width=\"640\"\n    height=\"480\"\n    src=\"https://www.youtube.com/embed/8UaSPjLkvZI\"\n    frameborder=\"0\"\n    allowfullscreen\n>\n</iframe>\n</p>\n<h2>Overview diagram of the project</h2>\n<figure style=\"text-align: center;\">\n  <img src=\"/files/1575e43bdedd7467297b1ff46272a4ff/lip.drawio.svg\" alt=\"Image input and what is expected as output diagram\">\n  <figcaption>Input an image and output a picture with the alterations overview.</figcaption>\n</figure>\n<h2>Python code</h2>\n<div class=\"gatsby-highlight\" data-language=\"py\"><pre class=\"language-py\"><code class=\"language-py\"><span class=\"token keyword\">import</span> cv2\n<span class=\"token keyword\">import</span> dlib\n<span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np\n<span class=\"token keyword\">import</span> math\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">onChange</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"callback function for track bars\"\"\"</span>\n    <span class=\"token keyword\">pass</span>\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">face_detection</span><span class=\"token punctuation\">(</span>gray_image<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"Detect all faces in an image\"\"\"</span>\n    face_detector <span class=\"token operator\">=</span> dlib<span class=\"token punctuation\">.</span>get_frontal_face_detector<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    faces <span class=\"token operator\">=</span> face_detector<span class=\"token punctuation\">(</span>gray_image<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\"># testing</span>\n    <span class=\"token comment\"># for face in faces:</span>\n    <span class=\"token comment\">#     cv2.rectangle(image, (face.left(), face.top()),</span>\n    <span class=\"token comment\">#                   (face.right(), face.bottom()), (0, 255, 0), 5)</span>\n    <span class=\"token comment\">#     cv2.imshow(\"Face Found\", image)</span>\n\n    <span class=\"token keyword\">return</span> faces\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">face_point</span><span class=\"token punctuation\">(</span>gray_image<span class=\"token punctuation\">,</span> faces<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"find all point in a face\"\"\"</span>\n    landmark_detector <span class=\"token operator\">=</span> dlib<span class=\"token punctuation\">.</span>shape_predictor<span class=\"token punctuation\">(</span>\n        <span class=\"token string\">\"shape_predictor_68_face_landmarks.dat\"</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\"># Loop over all detected face rectangles</span>\n    faces_landmarks <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>faces<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        face_area <span class=\"token operator\">=</span> dlib<span class=\"token punctuation\">.</span>rectangle<span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>faces<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>left<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                                   <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>faces<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>top<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                                   <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>faces<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>right<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                                   <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>faces<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>bottom<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\"># For every face rectangle, run landmarkDetector</span>\n        landmarks <span class=\"token operator\">=</span> landmark_detector<span class=\"token punctuation\">(</span>gray_image<span class=\"token punctuation\">,</span> face_area<span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\"># Save all faces landmarks as a list</span>\n        faces_landmarks<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>landmarks<span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\"># testing</span>\n        <span class=\"token comment\"># for landmarks in faces_landmarks:</span>\n        <span class=\"token comment\">#     for n in range(0, 68):</span>\n        <span class=\"token comment\">#         x = landmarks.part(n).x</span>\n        <span class=\"token comment\">#         y = landmarks.part(n).y</span>\n        <span class=\"token comment\">#         cv2.circle(image, (x, y), 5, (0, 255, 0), -1)</span>\n        <span class=\"token comment\"># cv2.imshow(\"Points Found\", image)</span>\n        <span class=\"token comment\"># cv2.imwrite(\"images/points.png\", image)</span>\n\n    <span class=\"token keyword\">return</span> faces_landmarks\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">lip</span><span class=\"token punctuation\">(</span>faces_landmarks<span class=\"token punctuation\">,</span> mask_lips<span class=\"token punctuation\">,</span> image_hsv<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"create mask and change the color of lips\"\"\"</span>\n    <span class=\"token keyword\">global</span> image\n\n    color <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>getTrackbarPos<span class=\"token punctuation\">(</span><span class=\"token string\">'hue'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Main Window'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span>\n    sat <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>getTrackbarPos<span class=\"token punctuation\">(</span><span class=\"token string\">'sat'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Main Window'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\"># change color on temp colored image</span>\n    image_hsv<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> color\n    image_hsv<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> sat <span class=\"token operator\">+</span> <span class=\"token number\">35</span>\n    image_colored <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>cvtColor<span class=\"token punctuation\">(</span>image_hsv<span class=\"token punctuation\">,</span> cv2<span class=\"token punctuation\">.</span>COLOR_HSV2BGR<span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\"># find point on lip</span>\n    <span class=\"token keyword\">for</span> landmarks <span class=\"token keyword\">in</span> faces_landmarks<span class=\"token punctuation\">:</span>\n        points <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n        <span class=\"token keyword\">for</span> n <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">48</span><span class=\"token punctuation\">,</span> <span class=\"token number\">68</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            x <span class=\"token operator\">=</span> landmarks<span class=\"token punctuation\">.</span>part<span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>x\n            y <span class=\"token operator\">=</span> landmarks<span class=\"token punctuation\">.</span>part<span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>y\n            points<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        arr <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span>points<span class=\"token punctuation\">)</span>\n        <span class=\"token comment\"># if lips existed draw those point</span>\n        <span class=\"token keyword\">if</span> points<span class=\"token punctuation\">:</span>\n            cv2<span class=\"token punctuation\">.</span>fillPoly<span class=\"token punctuation\">(</span>mask_lips<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>arr<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\"># testing</span>\n    <span class=\"token comment\"># cv2.imshow(\"lip mask\", mask_lips)</span>\n\n    <span class=\"token comment\"># Mask and merge</span>\n    lips <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>bitwise_and<span class=\"token punctuation\">(</span>image_colored<span class=\"token punctuation\">,</span> mask_lips<span class=\"token punctuation\">)</span>\n    not_lips <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>bitwise_and<span class=\"token punctuation\">(</span>image<span class=\"token punctuation\">,</span> cv2<span class=\"token punctuation\">.</span>bitwise_not<span class=\"token punctuation\">(</span>mask_lips<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    image <span class=\"token operator\">=</span> not_lips <span class=\"token operator\">+</span> lips\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">glasses</span><span class=\"token punctuation\">(</span>faces_landmarks<span class=\"token punctuation\">,</span> image_glasses<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"Put glasses on faces and change the from black_white to white.\"\"\"</span>\n    black_white <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>getTrackbarPos<span class=\"token punctuation\">(</span><span class=\"token string\">'black_white'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Main Window'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">for</span> landmarks <span class=\"token keyword\">in</span> faces_landmarks<span class=\"token punctuation\">:</span>\n        points <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n        lst <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">27</span><span class=\"token punctuation\">,</span> <span class=\"token number\">16</span><span class=\"token punctuation\">]</span>\n        <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> lst<span class=\"token punctuation\">:</span>\n            x <span class=\"token operator\">=</span> landmarks<span class=\"token punctuation\">.</span>part<span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>x\n            y <span class=\"token operator\">=</span> landmarks<span class=\"token punctuation\">.</span>part<span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>y\n            points<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n        glasses <span class=\"token operator\">=</span> image_glasses<span class=\"token punctuation\">.</span>copy<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        length <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>math<span class=\"token punctuation\">.</span>dist<span class=\"token punctuation\">(</span>points<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> points<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n        scale_factor <span class=\"token operator\">=</span> <span class=\"token builtin\">round</span><span class=\"token punctuation\">(</span>length<span class=\"token operator\">/</span>glasses<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n        l <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>scale_factor <span class=\"token operator\">*</span> glasses<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n        h <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>scale_factor <span class=\"token operator\">*</span> glasses<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> l <span class=\"token operator\">%</span> <span class=\"token number\">2</span> <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">:</span>\n            l <span class=\"token operator\">+=</span> <span class=\"token number\">1</span>\n        <span class=\"token keyword\">if</span> h <span class=\"token operator\">%</span> <span class=\"token number\">2</span> <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">:</span>\n            h <span class=\"token operator\">+=</span> <span class=\"token number\">1</span>\n\n        glasses <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>resize<span class=\"token punctuation\">(</span>glasses<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">,</span> h<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> interpolation<span class=\"token operator\">=</span>cv2<span class=\"token punctuation\">.</span>INTER_LINEAR<span class=\"token punctuation\">)</span>\n\n        l<span class=\"token punctuation\">,</span> w <span class=\"token operator\">=</span> glasses<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span>\n\n        l <span class=\"token operator\">=</span> l<span class=\"token operator\">/</span><span class=\"token number\">2</span>\n        w <span class=\"token operator\">=</span> w<span class=\"token operator\">/</span><span class=\"token number\">2</span>\n        y <span class=\"token operator\">=</span> points<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>\n        x <span class=\"token operator\">=</span> points<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n        <span class=\"token keyword\">if</span> points<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">%</span> <span class=\"token number\">2</span> <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">:</span>\n            x <span class=\"token operator\">+=</span> <span class=\"token number\">1</span>\n        <span class=\"token keyword\">if</span> points<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">%</span> <span class=\"token number\">2</span> <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">:</span>\n            y <span class=\"token operator\">+=</span> <span class=\"token number\">1</span>\n\n        <span class=\"token keyword\">if</span> black_white <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>\n            roi <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span>image<span class=\"token punctuation\">[</span>y <span class=\"token operator\">-</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> y<span class=\"token punctuation\">,</span> x <span class=\"token operator\">-</span>\n                                <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> glasses<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> black_white <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">:</span>\n            roi <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>subtract<span class=\"token punctuation\">(</span>image<span class=\"token punctuation\">[</span>y <span class=\"token operator\">-</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> y<span class=\"token punctuation\">,</span> x <span class=\"token operator\">-</span>\n                                     <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> x<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> glasses<span class=\"token punctuation\">)</span>\n\n        image<span class=\"token punctuation\">[</span>y <span class=\"token operator\">-</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> y<span class=\"token punctuation\">,</span> x <span class=\"token operator\">-</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> x<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> roi\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">global</span> image\n\n    cv2<span class=\"token punctuation\">.</span>namedWindow<span class=\"token punctuation\">(</span><span class=\"token string\">\"Main Window\"</span><span class=\"token punctuation\">)</span>\n\n    image <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>imread<span class=\"token punctuation\">(</span><span class=\"token string\">\"girl.jpg\"</span><span class=\"token punctuation\">,</span> cv2<span class=\"token punctuation\">.</span>IMREAD_COLOR<span class=\"token punctuation\">)</span>\n    image_gray <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>cvtColor<span class=\"token punctuation\">(</span>image<span class=\"token punctuation\">,</span> cv2<span class=\"token punctuation\">.</span>COLOR_BGR2GRAY<span class=\"token punctuation\">)</span>\n    mask <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros_like<span class=\"token punctuation\">(</span>image<span class=\"token punctuation\">)</span>\n    image_hsv <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>cvtColor<span class=\"token punctuation\">(</span>image<span class=\"token punctuation\">,</span> cv2<span class=\"token punctuation\">.</span>COLOR_BGR2HSV<span class=\"token punctuation\">)</span>\n    image_glasses <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>imread<span class=\"token punctuation\">(</span>\n        <span class=\"token string\">\"glasses.png\"</span><span class=\"token punctuation\">,</span> cv2<span class=\"token punctuation\">.</span>IMREAD_UNCHANGED<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span>\n    image_glasses <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>merge<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>image_glasses<span class=\"token punctuation\">,</span> image_glasses<span class=\"token punctuation\">,</span> image_glasses<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\"># stop program</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Press Q to quit\"</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\"># allow user to change lip and glass frame color</span>\n    cv2<span class=\"token punctuation\">.</span>createTrackbar<span class=\"token punctuation\">(</span><span class=\"token string\">\"hue\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Main Window'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">180</span><span class=\"token punctuation\">,</span> onChange<span class=\"token punctuation\">)</span>\n    cv2<span class=\"token punctuation\">.</span>createTrackbar<span class=\"token punctuation\">(</span><span class=\"token string\">\"sat\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Main Window'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">65</span><span class=\"token punctuation\">,</span> <span class=\"token number\">155</span><span class=\"token punctuation\">,</span> onChange<span class=\"token punctuation\">)</span>\n    cv2<span class=\"token punctuation\">.</span>createTrackbar<span class=\"token punctuation\">(</span><span class=\"token string\">\"black_white\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Main Window'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> onChange<span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\"># Detect all faces the image</span>\n    faces <span class=\"token operator\">=</span> face_detection<span class=\"token punctuation\">(</span>image_gray<span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\"># Detect all the point on face using dlib</span>\n    landmarks <span class=\"token operator\">=</span> face_point<span class=\"token punctuation\">(</span>image_gray<span class=\"token punctuation\">,</span> faces<span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\"># loop over image for color change</span>\n    <span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span>\n\n        <span class=\"token comment\"># Change lip color</span>\n        lip<span class=\"token punctuation\">(</span>landmarks<span class=\"token punctuation\">,</span> mask<span class=\"token punctuation\">,</span> image_hsv<span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\"># Put glasses on</span>\n        glasses<span class=\"token punctuation\">(</span>landmarks<span class=\"token punctuation\">,</span> image_glasses<span class=\"token punctuation\">)</span>\n\n        cv2<span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span><span class=\"token string\">'Main Window'</span><span class=\"token punctuation\">,</span> image<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> cv2<span class=\"token punctuation\">.</span>waitKey<span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span> <span class=\"token number\">0xFF</span> <span class=\"token operator\">==</span> <span class=\"token builtin\">ord</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"q\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">break</span>\n\n    <span class=\"token comment\"># Clean up</span>\n    cv2<span class=\"token punctuation\">.</span>destroyAllWindows<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">\"__main__\"</span><span class=\"token punctuation\">:</span>\n    main<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</code></pre></div>","frontmatter":{"title":"Virtual Makeup Python","date":"2021, Sep 02","tags":["OpenCV","Python","Dlib"],"img":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAMFAgT/xAAUAQEAAAAAAAAAAAAAAAAAAAAC/9oADAMBAAIQAxAAAAG8p8h+NrkMTYC6hD//xAAaEAEAAwADAAAAAAAAAAAAAAABAAIDERIx/9oACAEBAAEFArJnHWa0631OdbA2cxjezPGzP//EABYRAQEBAAAAAAAAAAAAAAAAABABEf/aAAgBAwEBPwHCH//EABcRAAMBAAAAAAAAAAAAAAAAAAABERD/2gAIAQIBAT8BpR5//8QAGxAAAgIDAQAAAAAAAAAAAAAAAAERIQIQEjH/2gAIAQEABj8CpTkxdYRJXmsYLOm7Fr//xAAbEAEBAQEAAwEAAAAAAAAAAAABEQAhQVFxof/aAAgBAQABPyGoGi5D8BmlSimiKUBuCPevboUeN2Qhugk5TMJ83//aAAwDAQACAAMAAAAQ+PCB/8QAGBEBAQADAAAAAAAAAAAAAAAAAQAQITH/2gAIAQMBAT8QBJvF7f/EABcRAQEBAQAAAAAAAAAAAAAAAAABITH/2gAIAQIBAT8QtJhyj//EABwQAQEBAAIDAQAAAAAAAAAAAAERACExQVFhcf/aAAgBAQABPxAZSzEFcACukBMoIAvzWQqFkvnEbVU1B6us6JB+Z0nQrx36yS65g68YTA6b/9k="},"images":{"fallback":{"src":"/static/9156cfc6cd38dce72186cedd98de3ece/f1f81/output.jpg","srcSet":"/static/9156cfc6cd38dce72186cedd98de3ece/2bd2c/output.jpg 750w,\n/static/9156cfc6cd38dce72186cedd98de3ece/f1f81/output.jpg 799w","sizes":"100vw"},"sources":[{"srcSet":"/static/9156cfc6cd38dce72186cedd98de3ece/0d6fe/output.avif 750w,\n/static/9156cfc6cd38dce72186cedd98de3ece/d1fbb/output.avif 799w","type":"image/avif","sizes":"100vw"},{"srcSet":"/static/9156cfc6cd38dce72186cedd98de3ece/4ea96/output.webp 750w,\n/static/9156cfc6cd38dce72186cedd98de3ece/437f6/output.webp 799w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.9762202753441803}}}}}},"pageContext":{"slug":"/Virtual Makeup Python/","previous":{"fields":{"slug":"/Portfolio Website/"},"frontmatter":{"title":"Building My Portfolio Website","tags":["JavaScript","GraphQl","Gatsby","React","AWS","S3","Github Actions"],"img":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/webp;base64,UklGRnAAAABXRUJQVlA4IGQAAADwAwCdASoUAAsAPtFUo0uoJKMhsAgBABoJZQCdACP/79/ZU47cUabAAP7wpwcMXao2YPdgYu0kh4PIhkAjG9h8yQXWFH+pXPjOS7EHSv61QX+9RYZ7ibzk1TcCzIn7+PxcJMAA"},"images":{"fallback":{"src":"/static/b884d33d215dee81035f1960af4d8c60/71d4d/img.webp","srcSet":"/static/b884d33d215dee81035f1960af4d8c60/a66aa/img.webp 750w,\n/static/b884d33d215dee81035f1960af4d8c60/65dd5/img.webp 1080w,\n/static/b884d33d215dee81035f1960af4d8c60/71d4d/img.webp 1280w","sizes":"100vw"},"sources":[]},"width":1,"height":0.5625}}}}},"next":{"fields":{"slug":"/Virtual Makeup C++/"},"frontmatter":{"title":"Virtual Makeup C++","tags":["OpenCV","c++","Dlib"],"img":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAMFAgT/xAAUAQEAAAAAAAAAAAAAAAAAAAAC/9oADAMBAAIQAxAAAAG8p8h+NrkMTYC6hD//xAAaEAEAAwADAAAAAAAAAAAAAAABAAIDERIx/9oACAEBAAEFArJnHWa0631OdbA2cxjezPGzP//EABYRAQEBAAAAAAAAAAAAAAAAABABEf/aAAgBAwEBPwHCH//EABcRAAMBAAAAAAAAAAAAAAAAAAABERD/2gAIAQIBAT8BpR5//8QAGxAAAgIDAQAAAAAAAAAAAAAAAAERIQIQEjH/2gAIAQEABj8CpTkxdYRJXmsYLOm7Fr//xAAbEAEBAQEAAwEAAAAAAAAAAAABEQAhQVFxof/aAAgBAQABPyGoGi5D8BmlSimiKUBuCPevboUeN2Qhugk5TMJ83//aAAwDAQACAAMAAAAQ+PCB/8QAGBEBAQADAAAAAAAAAAAAAAAAAQAQITH/2gAIAQMBAT8QBJvF7f/EABcRAQEBAQAAAAAAAAAAAAAAAAABITH/2gAIAQIBAT8QtJhyj//EABwQAQEBAAIDAQAAAAAAAAAAAAERACExQVFhcf/aAAgBAQABPxAZSzEFcACukBMoIAvzWQqFkvnEbVU1B6us6JB+Z0nQrx36yS65g68YTA6b/9k="},"images":{"fallback":{"src":"/static/9156cfc6cd38dce72186cedd98de3ece/f1f81/output.jpg","srcSet":"/static/9156cfc6cd38dce72186cedd98de3ece/2bd2c/output.jpg 750w,\n/static/9156cfc6cd38dce72186cedd98de3ece/f1f81/output.jpg 799w","sizes":"100vw"},"sources":[{"srcSet":"/static/9156cfc6cd38dce72186cedd98de3ece/4ea96/output.webp 750w,\n/static/9156cfc6cd38dce72186cedd98de3ece/437f6/output.webp 799w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.9762202753441803}}}}}}},
    "staticQueryHashes": ["2478211480","63159454"]}